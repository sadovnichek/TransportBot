# TransportBot Telegram

Авторы:

* Капкаев Виктор

# About
Данный Телеграмм Бот предназначен для помощи людям, активно пользующимся общественным транспортом в Екатеринбурге.

# Deploy
Инструкция по развертыванию бота локально и на Heroku.

Prerequisites:
* git
* jdk-11
* maven
* heroku

1. Клонируем репозиторий 
```
$ git clone https://github.com/sadovnichek/TransportBot
```

2. Заходим в папку, где лежит проект и собираем решение. В папке с проектом должна появиться папка target.
```
$ mvn install
```

3. Получить токен для бота у @BotFather. Добавить его в переменные среды.
```
...
BOT_TOKEN="<токен>"
...
```

4. Запуск бота локально.
```
$ java -jar TransportBot-1.0-SNAPSHOT-jar-with-dependencies.jar
```

5. Чтобы развернуть бота на Heroku, нужно выполнить следующие действия:
```
$ heroku login
$ heroku create
$ heroku git:remote -a <имя приложения>
// создайте репозиторий git и сделайте коммит
$ git push heroku main
$ heroku config:set BOT_TOKEN=<токен бота>
```
Теперь нужно зайти в личный кабинет на heroku и посмотреть логи: More-->View logs.
Если всё в порядке, то осталось запустить Dyno: Overview-->Configure Dynos--> 
сменить off на on.

Теперь бот запущен на heroku.

# Task 1
По названию остановки выводить несколько прибывающих по времени автобусов. 
Если остановок с таким названием несколько, то далее указать следующую остановку маршрута (направление движения). Пример:

/nextbus Музей Бажова: Аэроагентство

Ответ: Маршрут 58, Время 13.30

Если направление не указано, бот предложит его выбрать из доступных:

/nextbus Музей Бажова

Ответ: Укажите направление из возможных:

* Аэроагенство
* Белинского (Декабристов) 
* Трамвайный парк (Чапаева)

# Task 2
Деплой бота на удалённый сервер (Heroku). 

Добавить возможность неточно указывать название остановок. Например: воспринимать одинаково "пл." и "площадь", "пр." и "проспект", названия с заглавной буквой и с прописной. 

Также добавить спеллчекер, который будет подсказывать, если пользователь ввёл некорректные данные -> выводить какое-то количество слов, похожих на введеные.

Пример: /nextbus Трансагенство

Ответ: такой остановки нет. Возможно, вы имели в виду:

Трансагентство

# Task 3
Определить местоположение пользователя (кнопка внизу с надписью "определить по геолокации") и определить все остановки, находящиеся в радиусе 40 м от него. 

Вывести расписание на ближайшей к пользователю. Если остановка определена неверно, под сообщением будут кнопки с названием ближайших (не больше 2), чтобы указать верную остановку.

Пример: <нажатие кнопки "определить по геолокации">

...

"Название"--->" Направление"

"Расписание"

...

Если остановка определена неверно, выберите одну из предложенных:

<кнопка1> Название: Направление

...